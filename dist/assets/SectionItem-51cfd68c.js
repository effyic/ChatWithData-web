import{d as b,l as w,r as I,g as T,o as n,c as o,t as c,G as y,O as x,z as h,a as d,e as a,f as g,x as V,y as S,F as D,q as E,E as q,A as z,M}from"./index-149fb877.js";/* empty css                                                               */const O={class:"outline"},U={key:0},j={class:"levels"},F={class:"description"},A={key:0,class:"newBox"},G={key:1},J=b({__name:"SectionItem",props:{reportList:{type:Object,required:!0},level:{type:Number,default:0},id:{type:Number,default:0},parent:{type:Object,required:!0},parentindex:{type:Number,default:0}},setup(e){w();const u=I(null),s=e,m=i=>i>1?{paddingLeft:"".concat(10*i,"px")}:{};function r(i){if(s.level===0){if(String(i.title.trim()).length===0)return q({message:"输入框不能为空",type:"error"});i.edit=!1}else String(i.title.trim()).length>0&&String(i.description.trim()).length>0&&(i.edit=!1)}function B(i){s.parent.sections.splice(s.parent.sections.findIndex(t=>t===i),1),r(i)}function C(i){i.sections||(i.sections=[]),i.sections.push({description:"",title:"",edit:!0,sections:[]})}const L=i=>{clearTimeout(u.value),u.value=setTimeout(()=>{s.level!==0&&"edit"in i&&(i.children=!i.children)},200)},f=i=>{clearTimeout(u.value),"edit"in i&&(i.edit=!0)};return(i,t)=>{var k;const v=z,p=M,$=T("SectionItem",!0);return n(),o("div",O,[e.level===0?(n(),o("div",{key:0,class:"level0",onClick:t[2]||(t[2]=l=>L(e.reportList)),onDblclick:t[3]||(t[3]=l=>f(e.reportList))},[e.reportList.edit?(n(),y(v,{key:1,modelValue:e.reportList.title,"onUpdate:modelValue":t[0]||(t[0]=l=>e.reportList.title=l),placeholder:"请输入标题",onBlur:t[1]||(t[1]=l=>r(e.reportList))},null,8,["modelValue"])):(n(),o("div",U,c(e.reportList.title),1))],32)):(n(),o("div",{key:1,class:"levelsBox",style:x(m(e.level))},[e.reportList.edit?(n(),o("div",G,[a(v,{modelValue:e.reportList.title,"onUpdate:modelValue":t[8]||(t[8]=l=>e.reportList.title=l),placeholder:"请输入标题",onBlur:t[9]||(t[9]=l=>r(e.reportList))},null,8,["modelValue"]),a(v,{modelValue:e.reportList.description,"onUpdate:modelValue":t[10]||(t[10]=l=>e.reportList.description=l),placeholder:"请输内容描述",onBlur:t[11]||(t[11]=l=>r(e.reportList))},null,8,["modelValue"])])):(n(),o("div",{key:0,class:h(e.reportList.children?"sex":""),onClick:t[6]||(t[6]=l=>L(e.reportList)),onDblclick:t[7]||(t[7]=l=>f(e.reportList))},[d("div",j,c(e.reportList.title),1),d("div",F,c(e.reportList.description),1),e.reportList.children?(n(),o("div",A,[d("div",{class:"Box",onClick:t[4]||(t[4]=V(l=>C(e.reportList),["stop"]))},[a(p,{name:"Newchildren",width:"16px",height:"16px"}),t[12]||(t[12]=g(" 新增子集 ",-1))]),d("div",{class:"Box",onClick:t[5]||(t[5]=V(l=>B(e.reportList),["stop"]))},[a(p,{name:"deleteline",width:"16px",height:"16px"}),t[13]||(t[13]=g(" 删除当前集 ",-1))])])):S("",!0)],34))],4)),((k=e.reportList.sections)==null?void 0:k.length)>0?(n(),o("div",{key:2,style:x(m(e.level))},[(n(!0),o(D,null,E(e.reportList.sections,(l,N)=>(n(),y($,{parentindex:e.parentindex,parent:e.reportList,key:N,level:e.level+1,reportList:l,id:e.id},null,8,["parentindex","parent","level","reportList","id"]))),128))],4)):S("",!0)])}}});export{J as default};
